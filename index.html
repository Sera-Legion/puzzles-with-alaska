<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Marck+Script&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/p.css">
    <title>Пазлы с Аляской - Главная</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            font-family: "areal", cursive;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            font-weight: 600;
            letter-spacing: 1px;
            font-family: "Marck Script", cursive;
            z-index: 100;
        }

        .level-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 22px;
            cursor: pointer;
            font-size: 20px;
            padding: 15px 30px;
            margin: 10px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
            text-decoration: none; /* Убираем подчеркивание */
            display: inline-block; /* Чтобы кнопка выглядела как кнопка */
            z-index: 100;
        }

        .level-btn:hover {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }

        .emoji {
            color: white;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);
            font-style: normal;
        }

        @media (max-width: 500px) {
            .level-btn {
                font-size: 16px;
                padding: 12px 24px;
            }
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            overflow: hidden;
            position: relative;
        }

        /* Анимированные звёзды */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) infinite ease-in-out;
        }

        .ZV {
            max-height: 25px;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);

        }

        .ZV:last-child {
            transform: scale(-1, 1);
        }

        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        @media (max-width: 500px) {

        h1 {
            font-size: medium;
            }

        .ZV {
            transform: translateY(25%);
        }

        .ZV:last-child {
            transform: translateY(25%) scale(-1, 1);
        }
        }
    </style>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="stars" id="stars"></div>
    <h1><img class="ZV" src="img/star.png">Пазлы с Аляской<img class="ZV" src="img/star.png"></h1>
    <a class="level-btn" href="pages/игра3.html">Легкий уровень</a>
    <a class="level-btn" href="pages/игра4.html">Средний уровень</a>
    <a class="level-btn" href="pages/игра5.html">Сложный уровень</a>

        <!-- Геймерский аудиоплеер -->
        <div class="audio-toggle" id="audioToggle">
            <i class="fas fa-headphones"></i>
        </div>
    
        <div class="audio-panel" id="audioPanel">
            <div class="panel-header">
                <div class="panel-title">MUSIC PLAYER</div>
                <button class="close-btn" id="closePanel">&times;</button>
            </div>
    
            <div class="track-info">
                <div class="track-name" id="trackName">Cosmic Journey</div>
                <div class="track-artist" id="trackArtist">Space Sounds</div>
            </div>
    
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
            </div>
    
            <div class="time-display">
                <span id="currentTime">0:00</span>
                <span id="duration">0:00</span>
            </div>
    
            <div class="controls">
                <button class="control-btn" id="prevBtn" title="Previous"><i class="fas fa-step-backward"></i></button>
                <button class="control-btn" id="rewindBtn" title="Rewind 10s"><i class="fas fa-backward"></i></button>
                <button class="control-btn play-btn" id="playBtn" title="Play/Pause"><i class="fas fa-play"></i></button>
                <button class="control-btn" id="forwardBtn" title="Forward 10s"><i class="fas fa-forward"></i></button>
                <button class="control-btn" id="nextBtn" title="Next"><i class="fas fa-step-forward"></i></button>
            </div>
    
            <div class="volume-control">
                <i class="fas fa-volume-up volume-icon"></i>
                <input type="range" min="0" max="1" step="0.01" value="0.5" class="volume-slider" id="volumeSlider">
                <i class="fas fa-volume-mute mute-btn" id="muteBtn"></i>
            </div>
    
            <div class="playlist" id="playlist">
                <div class="playlist-item active" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">Cosmic Journey</div>
                <div class="playlist-item" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3">Stellar Dreams</div>
                <div class="playlist-item" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3">Galactic Waves</div>
                <div class="playlist-item" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3">Nebula Dance</div>
                <div class="playlist-item" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3">Orbit Melody</div>
            </div>
    
            <audio id="audio"></audio>
            
    <script>
        // Создаём звёзды
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 200; i++) {
            const star = document.createElement('div');
            star.classList.add('star');

            // Случайные параметры
            const size = Math.random() * 2; // Размер звезды
            const x = Math.random() * 100; // Позиция по оси X
            const y = Math.random() * 100; // Позиция по оси Y
            const duration = 2 + Math.random() * 5; // Длительность анимации

            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.left = `${x}%`;
            star.style.top = `${y}%`;
            star.style.setProperty('--duration', `${duration}s`);

            starsContainer.appendChild(star);
        }
        // Аудиоплеер
const audioToggle = document.getElementById('audioToggle');
const audioPanel = document.getElementById('audioPanel');
const closePanel = document.getElementById('closePanel');
const audio = document.getElementById('audio');
const playBtn = document.getElementById('playBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const rewindBtn = document.getElementById('rewindBtn');
const forwardBtn = document.getElementById('forwardBtn');
const progressContainer = document.getElementById('progressContainer');
const progressBar = document.getElementById('progressBar');
const currentTimeEl = document.getElementById('currentTime');
const durationEl = document.getElementById('duration');
const volumeSlider = document.getElementById('volumeSlider');
const muteBtn = document.getElementById('muteBtn');
const playlist = document.getElementById('playlist');
const playlistItems = playlist.querySelectorAll('.playlist-item');
const trackName = document.getElementById('trackName');
const trackArtist = document.getElementById('trackArtist');

let isPlaying = false;
let currentTrack = 0;

// Плейлист
const tracks = [
    { name: "Outside", artist: "Oneheart", src: "music/outside.mp3" },
    { name: "Leaving", artist: "Oneheart", src: "music/leaving.mp3" },
    { name: "Snowfall", artist: "Oneheart", src: "music/snegpadaet.mp3" },
    { name: "HeartBrake", artist: "Oneheart", src: "music/hertbrak.mp3" }
];

// Инициализация плеера
function initPlayer() {
    // Загружаем сохраненное состояние
    const savedState = JSON.parse(localStorage.getItem('audioPlayerState'));
    
    if (savedState) {
        currentTrack = savedState.currentTrack || 0;
        isPlaying = savedState.isPlaying || false;
        audio.volume = savedState.volume || 0.5;
        volumeSlider.value = audio.volume * 100;
        
        loadTrack(currentTrack);
        
        if (isPlaying) {
            // Восстанавливаем позицию воспроизведения после загрузки метаданных
            audio.addEventListener('loadedmetadata', function() {
                audio.currentTime = savedState.currentTime || 0;
                audio.play().catch(e => console.log("Autoplay prevented:", e));
            }, { once: true });
        }
    } else {
        loadTrack(currentTrack);
        audio.volume = 0.5;
        volumeSlider.value = 50;
    }
    
    // Обновляем иконку звука
    updateVolumeIcon();
}

// Загрузка трека
function loadTrack(index) {
    const track = tracks[index];
    audio.src = track.src;
    trackName.textContent = track.name;
    trackArtist.textContent = track.artist;
    
    // Обновляем активный элемент плейлиста
    playlistItems.forEach(item => item.classList.remove('active'));
    playlistItems[index].classList.add('active');
    
    // Сохраняем состояние
    savePlayerState();
}

// Воспроизведение трека
function playTrack() {
    audio.play()
        .then(() => {
            isPlaying = true;
            updatePlayButton();
            savePlayerState();
        })
        .catch(e => console.log("Play failed:", e));
}

// Пауза
function pauseTrack() {
    audio.pause();
    isPlaying = false;
    updatePlayButton();
    savePlayerState();
}

// Обновление кнопки play/pause
function updatePlayButton() {
    const icon = playBtn.querySelector('i');
    icon.classList.remove('fa-play', 'fa-pause');
    icon.classList.add(isPlaying ? 'fa-pause' : 'fa-play');
}

// Следующий трек
function nextTrack() {
    currentTrack = (currentTrack + 1) % tracks.length;
    loadTrack(currentTrack);
    if (isPlaying) playTrack();
}

// Предыдущий трек
function prevTrack() {
    currentTrack = (currentTrack - 1 + tracks.length) % tracks.length;
    loadTrack(currentTrack);
    if (isPlaying) playTrack();
}

// Перемотка на 10 секунд назад
function rewind() {
    audio.currentTime = Math.max(0, audio.currentTime - 10);
    savePlayerState();
}

// Перемотка на 10 секунд вперед
function forward() {
    audio.currentTime = Math.min(audio.duration, audio.currentTime + 10);
    savePlayerState();
}

// Обновление прогресс-бара
function updateProgress() {
    const { currentTime, duration } = audio;
    const progressPercent = (currentTime / duration) * 100;
    progressBar.style.width = `${progressPercent}%`;
    
    // Форматирование времени
    currentTimeEl.textContent = formatTime(currentTime);
    
    if (!isNaN(duration)) {
        durationEl.textContent = formatTime(duration);
    }
    
    // Сохраняем текущую позицию каждые 5 секунд
    if (currentTime % 5 < 0.1) {
        savePlayerState();
    }
}

// Установка прогресса при клике
function setProgress(e) {
    const width = this.clientWidth;
    const clickX = e.offsetX;
    const duration = audio.duration;
    audio.currentTime = (clickX / width) * duration;
    savePlayerState();
}

// Форматирование времени
function formatTime(seconds) {
    const minutes = Math.floor(seconds / 60);
    seconds = Math.floor(seconds % 60);
    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
}

// Управление громкостью
function setVolume() {
    audio.volume = volumeSlider.value;
    updateVolumeIcon();
    savePlayerState();
}

// Обновление иконки громкости
function updateVolumeIcon() {
    const icon = muteBtn.querySelector('i');
    icon.classList.remove('fa-volume-up', 'fa-volume-down', 'fa-volume-mute');
    
    if (audio.volume === 0 || audio.muted) {
        icon.classList.add('fa-volume-mute');
    } else if (audio.volume < 0.5) {
        icon.classList.add('fa-volume-down');
    } else {
        icon.classList.add('fa-volume-up');
    }
}

// Отключение звука
function toggleMute() {
    audio.muted = !audio.muted;
    updateVolumeIcon();
    savePlayerState();
}

// Выбор трека из плейлиста
function selectTrack(e) {
    const item = e.target.closest('.playlist-item');
    if (!item) return;
    
    const index = Array.from(playlistItems).indexOf(item);
    currentTrack = index;
    loadTrack(currentTrack);
    if (isPlaying) playTrack();
}

// Открытие/закрытие панели
function togglePanel() {
    audioPanel.classList.toggle('active');
}

// Сохранение состояния плеера
function savePlayerState() {
    localStorage.setItem('audioPlayerState', JSON.stringify({
        currentTrack: currentTrack,
        isPlaying: isPlaying,
        volume: audio.volume,
        currentTime: audio.currentTime,
        muted: audio.muted
    }));
}

// События
audioToggle.addEventListener('click', togglePanel);
closePanel.addEventListener('click', togglePanel);

playBtn.addEventListener('click', () => {
    isPlaying ? pauseTrack() : playTrack();
});

prevBtn.addEventListener('click', prevTrack);
nextBtn.addEventListener('click', nextTrack);
rewindBtn.addEventListener('click', rewind);
forwardBtn.addEventListener('click', forward);
progressContainer.addEventListener('click', setProgress);
volumeSlider.addEventListener('input', setVolume);
muteBtn.addEventListener('click', toggleMute);
playlist.addEventListener('click', selectTrack);

audio.addEventListener('timeupdate', updateProgress);
audio.addEventListener('ended', nextTrack);
audio.addEventListener('loadedmetadata', updateProgress);

// Сохраняем состояние при закрытии страницы
window.addEventListener('beforeunload', savePlayerState);

// Инициализация плеера при загрузке страницы
document.addEventListener('DOMContentLoaded', initPlayer);

// При возврате на страницу (например, через кнопку "Назад")
window.addEventListener('pageshow', function(event) {
    if (event.persisted) {
        const savedState = JSON.parse(localStorage.getItem('audioPlayerState'));
        if (savedState && savedState.isPlaying) {
            audio.play().catch(e => console.log("Autoplay prevented"));
        }
    }
});
    </script>

</body>

</html>
